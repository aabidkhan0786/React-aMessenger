{"version":3,"sources":["components/Header/Navbar.js","Redux/Actions/Authaction.js","components/Header/Home.js","Redux/Actions/Useraction.js","components/Header/Login.js","components/PrivateRoute.js","App.js","Redux/Reducers/AuthReducers.js","Redux/Reducers/UserReducers.js","Redux/Reducers/index.js","Redux/Store/Store.js","index.js"],"names":["Navbar","auth","useSelector","state","dispatch","useDispatch","className","style","backgroundColor","authenticated","to","onClick","e","uid","a","type","firestore","collection","doc","update","isOnline","then","signOut","localStorage","clear","catch","error","console","log","payload","alert","User","props","user","name","firstName","lastName","size","round","Home","useState","startChat","setStartChat","userChat","setUserChat","message","setMessage","chatUser","setChatUSer","useEffect","onSnapshot","querySnapshot","users","forEach","data","push","chat","where","uid_1","uid_2","orderBy","conversations","user_uid_1","user_uid_2","getConversation","length","responsiveClass","autoplay","smartSpeed","responsive","0","items","400","600","700","1000","map","class","key","id","color","con","textAlign","placeholder","aria-label","aria-describedby","value","onChange","target","msgobj","add","createdAt","Date","isView","passMessage","Register","fname","setFname","lname","setLname","email","setEmail","password","setPassword","onSubmit","preventDefault","db","createUserWithEmailAndPassword","currUser","currentUser","updateProfile","displayName","set","loggedIn","setItem","JSON","stringify","signup","for","aria-hidden","required","Login","t","signInWithEmailAndPassword","split","PrivateRoute","Component","component","rest","getItem","parse","App","exact","path","initialState","rootReducer","combineReducers","action","authenticating","store","createStore","applyMiddleware","thunk","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","window","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.60dfa168.chunk.js","sourcesContent":["import React from 'react'\r\nimport { useSelector,useDispatch } from 'react-redux'\r\nimport { NavLink,Link } from 'react-router-dom'\r\nimport { userLogOut } from '../../Redux/Actions/Authaction'\r\nimport \"../Header/style.css\"\r\nimport PowerSettingsNewIcon from '@material-ui/icons/PowerSettingsNew';\r\n\r\nconst Navbar = () => {\r\n\r\n  const auth = useSelector(state=>state.auth)\r\n  const dispatch = useDispatch();\r\n\r\n\r\n\r\n    return (\r\n        <>\r\n\r\n            <nav className=\"navbar navbar-expand-lg menu container-fluid sticky-top\"   style={{backgroundColor : \"black\"}} >\r\n                                 \r\n                  <p className=\"neon\">aMessenger</p>\r\n                       {\r\n                        auth.authenticated ?\r\n                        <>      \r\n                            <NavLink className=\"nav-link ml-auto logout\" to=\"#\" onClick={e=>dispatch(userLogOut(auth.uid))}>LogOut <PowerSettingsNewIcon/></NavLink>\r\n                        </> :null\r\n                      }\r\n                                      \r\n            </nav>\r\n\r\n\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Navbar\r\n","import {auth, firestore} from \"firebase\"\r\n\r\nexport const signup = (user)=>{\r\n    return async (dispatch) => {\r\n        const db = firestore();\r\n        dispatch({\r\n            type: \"LOGIN_REQUEST\",\r\n            \r\n        })\r\n        auth()\r\n        .createUserWithEmailAndPassword(user.email,user.password)\r\n        .then(data=>{\r\n            console.log(data);\r\n            const currUser = auth().currentUser;\r\n            const name = `${user.fname} ${user.lname}`\r\n            currUser.updateProfile({\r\n               displayName : name\r\n            })\r\n            .then(()=>{\r\n                db.collection(\"users\")\r\n                .doc(data.user.uid)\r\n                .set({\r\n                    firstName : user.fname,\r\n                    lastName : user.lname,\r\n                    uid : data.user.uid,\r\n                    createdAt :new Date(),\r\n                    isOnline : true\r\n                }).then(()=>{\r\n                    const loggedIn = {\r\n                        firstName : user.fname,\r\n                        lastName : user.lname,\r\n                        uid : data.user.uid,\r\n                        email : user.email\r\n                    }\r\n                    localStorage.setItem('user',JSON.stringify(loggedIn));\r\n                    console.log(\"successfull\");\r\n                    dispatch({\r\n                        type: \"LOGIN_SUCCESS\",\r\n                        payload: {user:loggedIn}\r\n                    })\r\n                })\r\n                    .catch(error=>{\r\n                        console.log(error);\r\n                        dispatch({\r\n                            type: \"LOGIN_FAIL\",\r\n                            payload: {error}\r\n                        })\r\n                    })\r\n                \r\n            })\r\n        })\r\n        .catch(error=>{\r\n            console.log(error);\r\n            alert(error);\r\n        })\r\n    }\r\n}\r\n\r\n\r\nexport const signIn=(user)=>{\r\n    return async dispatch =>{\r\n        dispatch({\r\n            type:'LOGIN_REQUEST'\r\n        });\r\n\r\n\r\n        \r\n\r\n        auth()\r\n        .signInWithEmailAndPassword(user.email,user.password)\r\n        .then((data)=>{\r\n            console.log(data);\r\n\r\n\r\n            const db = firestore();\r\n            db.collection('users')\r\n            .doc(data.user.uid)\r\n            .update({\r\n                isOnline:true\r\n            })\r\n            .then(()=>{\r\n                const name = data.user.displayName.split(\" \");\r\n                const firstName = name[0];\r\n                const lastName = name[1];\r\n                const loggedIn = {\r\n                    firstName ,\r\n                    lastName ,\r\n                    uid : data.user.uid,\r\n                    email : data.user.email\r\n                }\r\n                localStorage.setItem('user',JSON.stringify(loggedIn));\r\n                console.log(\"successfull\");\r\n                dispatch({\r\n                    type: \"LOGIN_SUCCESS\",\r\n                    payload: {user:loggedIn}\r\n                })\r\n            })\r\n            .catch(error=>{\r\n                alert(error)\r\n\r\n            })\r\n\r\n\r\n        })\r\n        .catch(error=>{\r\n            alert(error);\r\n            dispatch({\r\n                type:'LOGIN_FAIL',\r\n                payload:{error}\r\n            })\r\n        })\r\n    }\r\n}\r\n\r\n\r\nexport const isUserLoggedIn = ()=>{\r\n    return async dispatch=>{\r\n        const user = localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')) : null;\r\n        if(user){\r\n            dispatch({\r\n                type: \"LOGIN_SUCCESS\",\r\n                payload: {user}\r\n            })\r\n        }else{\r\n            dispatch({\r\n                type:'LOGIN_FAIL',\r\n                payload:{error:\"Log In Again Please\"}\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport const userLogOut = (uid)=>{\r\n    return async dispatch=>{\r\n        dispatch({\r\n            type:\"USER_LOGOUT_REQUEST\",\r\n        })\r\n\r\n        const db = firestore();\r\n        db.collection('users')\r\n        .doc(uid)\r\n        .update({\r\n            isOnline:false\r\n        })\r\n        .then(()=>{\r\n            auth()\r\n            .signOut()\r\n            .then(()=>{\r\n                localStorage.clear();\r\n                dispatch({type:\"USER_LOGOUT_SUCCESS\"})\r\n            })\r\n            .catch(error=>{\r\n                console.log(error);\r\n                dispatch({\r\n                    type:\"USER_LOGOUT_FAIL\",\r\n                    payload: {error}\r\n            })\r\n            })\r\n        })\r\n\r\n        .catch(error=>{\r\n            console.log(error);\r\n            alert(error);\r\n        })\r\n\r\n\r\n        \r\n    }\r\n}\r\n\r\n","import React,{useEffect,useState} from 'react'\r\nimport {useSelector,useDispatch} from \"react-redux\"\r\nimport { getConversation, getUsers, passMessage } from '../../Redux/Actions/Useraction';\r\nimport Avatar from 'react-avatar';\r\nimport OwlCarousel from 'react-owl-carousel';\r\nimport 'owl.carousel/dist/assets/owl.carousel.css';\r\nimport 'owl.carousel/dist/assets/owl.theme.default.css';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport \"../Header/style.css\"\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\n\r\n\r\nconst User = props =>{\r\n    const {user,onClick} =props;\r\n    const name = `${user.firstName} ${user.lastName}`\r\n    console.log(name)\r\n    return(\r\n        <>\r\n            <div className=\"carousel\" onClick={()=>onClick(user)}>{user.isOnline ?  <span className=\"float-right online\">  </span>:<span className=\"float-right  offline\">  </span>}\r\n                <Avatar size=\"40\" round={true} name={name}/> {name}    \r\n            </div>\r\n    </>\r\n    )\r\n}\r\n\r\n\r\nconst Home = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    const auth = useSelector(state=>state.auth)\r\n    const user = useSelector(state=>state.user)\r\n    const [startChat,setStartChat] = useState(false);\r\n    const [userChat,setUserChat] = useState('');\r\n    const [message,setMessage] = useState(\"\");\r\n    const [chatUser,setChatUSer] = useState(null);\r\n\r\n    useEffect(()=>{\r\n        dispatch(getUsers(auth.uid));\r\n    },[])\r\n\r\n\r\n    const chat = user =>{\r\n        const name = `${user.firstName} ${user.lastName}`\r\n        setStartChat(true);\r\n        setUserChat(name)\r\n        setChatUSer(user.uid)\r\n\r\n        dispatch(getConversation({uid_1: auth.uid, uid_2: user.uid}))\r\n\r\n    }\r\n\r\n    const sendMessage=()=>{\r\n\r\n        const msgobj = {\r\n            message,\r\n            user_uid_1 : auth.uid,\r\n            user_uid_2 : chatUser,\r\n        }\r\n        console.log(msgobj);\r\n\r\n        if(message != \"\"){\r\n            dispatch(passMessage(msgobj));\r\n            setMessage(\"\");\r\n        }\r\n    }\r\n\r\n    const options = {\r\n        // margin: 30,\r\n        responsiveClass: true,\r\n        autoplay: true,\r\n        smartSpeed: 1000,\r\n        responsive: {\r\n            0: {\r\n                items: 2,\r\n            },\r\n            400: {\r\n                items: 2,\r\n            },\r\n            600: {\r\n                items: 2,\r\n            },\r\n            700: {\r\n                items: 2,\r\n            },\r\n            1000: {\r\n                items: 2,\r\n            }\r\n        },\r\n      };\r\n\r\n    return (\r\n        <>\r\n\r\n<section className=\"row \">\r\n        <div className=\"col-md-6 col-sm-12 mx-auto my-5 border \">\r\n            <div className=\" border rounded text-center mt-5 chat_name pt-2 text-capitalize\">\r\n                {auth.authenticated ? <> hello, {`${auth.firstName} ${auth.lastName}`}</>:null}\r\n            </div>   \r\n\r\n\r\n            <div className=\"text-capitalize\">\r\n\r\n                {   \r\n                    user.users.length > 0 ?\r\n                    <OwlCarousel className=\"slider-items owl-carousel \"  {...options}>\r\n                    {user.users.map(user=>\r\n                    <>\r\n                        \r\n                            <div class=\"card\" style={{}}>\r\n                                <div class=\"card-body bg-info\">\r\n                                    <User user={user} key={user.uid} onClick={chat} />\r\n                                </div>\r\n                            </div>\r\n                                    \r\n                    </>\r\n                    )} </OwlCarousel> : null\r\n                    \r\n                }   \r\n                \r\n                </div>\r\n\r\n    \r\n    { startChat ? <div id=\"head\" className=\"mt-3 text-capitalize px-3 py-2\"> <Avatar size=\"50\" round={true} name={userChat} className=\"mr-3\"/>{userChat} \r\n    {user.isOnline ?  <span className=\"float-right my-3 online\">  </span>:<span className=\"float-right my-3 offline\">  </span>}\r\n     </div> :<> <h1 className=\"my-5 maker  \">Select User From Above to chat <ChatIcon/></h1> <br/>\r\n        <h2 className=\"my-5 text-center maker \">Developed By:<b style={{color:'black'}}><u> Abdul Aabid Khan</u></b></h2></> }\r\n   \r\n    <div id=\"body\" className=\"mb-0\" >\r\n    {\r\n        startChat ?\r\n       <div className=\"bg-info w-100 h-100\">\r\n        {user.conversations.map(con=>\r\n            <div  style={{textAlign : con.user_uid_1 == auth.uid ? 'right':'left' }}>\r\n                <p className=\"px-2\" >{con.message}</p>\r\n            </div>\r\n        )} </div>:\"\"\r\n    }\r\n\r\n    <div id=\"btm\">\r\n    {\r\n              startChat ? <>\r\n              <div class=\"input-group mb-3\">\r\n              <input type=\"text\" class=\"form-control\" placeholder=\"Write Your Message....\" aria-label=\"Recipient's username\" aria-describedby=\"button-addon2\"\r\n                        value={message} onChange={(e) => setMessage(e.target.value)}/>\r\n              <div class=\"input-group-append\">\r\n                <button class=\"btn btn-info\" type=\"button\" id=\"button-addon2\"><SendIcon onClick={sendMessage} /></button>\r\n              </div>\r\n            </div>\r\n        </>:null}\r\n    </div>\r\n    \r\n   \r\n\r\n\r\n</div>\r\n</div>\r\n\r\n</section>\r\n\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Home\r\n","import { firestore } from 'firebase'\r\n\r\nexport const getUsers = (uid) =>{\r\n    return async (dispatch)=>{\r\n        dispatch({type: 'USER_REQUEST'})\r\n\r\n        const db = firestore();\r\n        db.collection('users')\r\n\r\n        .onSnapshot((querySnapshot)=>{\r\n            const users=[];\r\n            querySnapshot.forEach(doc=>{\r\n                if(doc.data().uid != uid){\r\n                    users.push(doc.data());\r\n                }\r\n                \r\n            })\r\n            // console.log(users);\r\n            dispatch({type: 'USER_SUCCESS',\r\n            payload: {users}\r\n        })\r\n        })\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const passMessage = (msgobj)=>{\r\n    return async dispatch =>{\r\n        const db = firestore();\r\n        db.collection(\"conversations\")\r\n        .add({\r\n            ...msgobj,\r\n            createdAt: new Date(),\r\n            isView : false\r\n        })\r\n        .then((data)=>{\r\n            console.log(data);\r\n\r\n        })\r\n        .catch(error=>{\r\n            console.log(error);\r\n            alert(error);\r\n        })\r\n    }\r\n\r\n}\r\n\r\n\r\nexport const getConversation = (user)=>{\r\n    return async dispatch=>{\r\n        const db =  firestore();\r\n        db.collection('conversations')\r\n        .where('user_uid_1','in',[user.uid_1,user.uid_2])\r\n        .orderBy('createdAt', 'asc')\r\n        .onSnapshot(querySnapshot=>{\r\n            const conversations = [];\r\n            querySnapshot.forEach(doc=>{\r\n                console.log(doc.data())\r\n\r\n                if(\r\n                    (doc.data().user_uid_1 == user.uid_1 && doc.data().user_uid_2 == user.uid_2)\r\n                    || \r\n                    (doc.data().user_uid_1 == user.uid_2 && doc.data().user_uid_2 == user.uid_1)\r\n                ){\r\n                    conversations.push(doc.data())\r\n                }\r\n\r\n\r\n                // if(conversations.length > 0 ){\r\n                //     dispatch({\r\n                //         type:\"MESSAGE_SENT_SUCCESS\",\r\n                //         payload : {conversations}\r\n                //     })\r\n                // }else{\r\n                //     dispatch({\r\n                //         type:\"MESSAGE_SENT_FAILURE\",\r\n                //         payload : {conversations}\r\n                //     })\r\n                // }\r\n                \r\n            })\r\n            dispatch({\r\n                type: \"MESSAGE_SENT_SUCCESS\",\r\n                payload: { conversations }\r\n            })\r\n            console.log(conversations)\r\n        })\r\n    }\r\n}","import React, { useEffect, useState } from 'react'\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport { Redirect } from 'react-router-dom';\r\nimport {isUserLoggedIn, signIn} from '../../Redux/Actions/Authaction';\r\nimport \"./login.css\"\r\n\r\n\r\nimport { signup } from '../../Redux/Actions/Authaction';\r\n\r\n\r\n\r\n\r\nconst Login = () => {\r\n  \r\n  const [email,setEmail] = useState('');\r\n  const [password,setPassword] = useState('');\r\n  const dispatch = useDispatch();\r\n  const auth = useSelector(state => state.auth);\r\n \r\n  console.log(auth.t);\r\n\r\n\r\n\r\n\r\n\r\n  const handleLogin=(e)=>{\r\n    e.preventDefault();\r\n\r\n    if(email==\"\"){\r\n      alert(\"email required\");\r\n      return;\r\n    }\r\n    if(password==\"\"){\r\n      alert(\"paas required\");\r\n      return;\r\n    }\r\n\r\n    dispatch(signIn({email,password}));\r\n\r\n\r\n\r\n  }\r\n\r\n  if(auth.authenticated){\r\n    return <Redirect to=\"/\"/>\r\n  }\r\n\r\n    return (\r\n        <>\r\n<div className=\"body1 mt-4\">\r\n\r\n\r\n\r\n                <div class=\"main\">  \t\r\n\t\t<input type=\"checkbox\" id=\"chk\" aria-hidden=\"true\"/>\r\n\r\n                <Register/>\r\n\r\n\t\t\t<div class=\"login\">\r\n\t\t\t\t<form  onSubmit={handleLogin}>\r\n\t\t\t\t\t<label className=\"label1\" for=\"chk\" aria-hidden=\"true\">Login</label>\r\n\t\t\t\t\t<input className=\"input1\" type=\"email\" name=\"email\" placeholder=\"Email\" required=\"\" value={email} onChange={e=>setEmail(e.target.value)}/>\r\n\t\t\t\t\t<input className=\"input1\" type=\"password\" name=\"pswd\" placeholder=\"Password\" required=\"\" value={password} onChange={e=>setPassword(e.target.value)}/>\r\n\t\t\t\t\t<button className=\"button1\" type=\"submit\">Login</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t</div>\r\n  </div>\r\n        </>\r\n    )\r\n    \r\n}\r\n\r\nconst Register = ()=>{\r\n  const [fname,setFname] = useState();\r\n  const [lname,setLname] = useState();\r\n  const [email,setEmail] = useState();\r\n  const [password,setPassword] = useState();\r\n  const dispatch = useDispatch();\r\n  const auth = useSelector(state=> state.auth)\r\n\r\n  const handleRegister=e=>{\r\n      e.preventDefault();\r\n      const user ={\r\n          fname,lname,email,password\r\n      }\r\n      dispatch(signup(user));\r\n  }\r\n\r\n\r\n  if(auth.authenticated){\r\n    return <Redirect to=\"/\"/>\r\n  }\r\n\r\n  return (\r\n      <>\r\n\r\n\t<div class=\"signup\">\r\n\t\t\t\t<form onSubmit={handleRegister}>\r\n\t\t\t\t\t<label className=\"label1\" for=\"chk\" aria-hidden=\"true\">Sign up</label>\r\n\t\t\t\t\t<input className=\"input1\" type=\"text\" name=\"txt\" placeholder=\"First Name\" required=\"\" value={fname} onChange={e=> setFname(e.target.value)}/>\r\n\t\t\t\t\t<input className=\"input1\" type=\"text\" name=\"txtl\" placeholder=\"Last Name\" required=\"\" value={lname} onChange={e=> setLname(e.target.value)}/>\r\n          <input className=\"input1\" type=\"email\" name=\"email\" placeholder=\"Email\" required=\"\" value={email} onChange={e=> setEmail(e.target.value)}/>\r\n\t\t\t\t\t<input className=\"input1\" type=\"password\" name=\"pswd\" placeholder=\"Password\" required=\"\" value={password} onChange={e=> setPassword(e.target.value)}/>\r\n\t\t\t\t\r\n\t\t\t\t\t<button className=\"button1\" type=\"submit\">Sign up</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n      </>\r\n  )\r\n}\r\n\r\n\r\nexport default Login\r\n\r\n\r\n","import React, { Component } from 'react'\r\nimport {Redirect, Route} from \"react-router-dom\"\r\n\r\nconst PrivateRoute = ({component:Component, ...rest}) => {\r\n    return (\r\n        <>\r\n            <Route {...rest} component={(props)=>{\r\n                const user = localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')) : null\r\n\r\n                if(user){\r\n                    return <Component {...props}/>\r\n                }else{\r\n                    return <Redirect to = \"/login\"/>\r\n                }\r\n            }}/>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default PrivateRoute\r\n","import React,{useEffect} from 'react'\r\nimport Navbar from './components/Header/Navbar'\r\nimport {Switch,Route, Redirect} from 'react-router-dom'\r\nimport Home from './components/Header/Home'\r\nimport Login from './components/Header/Login'\r\nimport PrivateRoute from \"../src/components/PrivateRoute\"\r\nimport {useDispatch,useSelector} from \"react-redux\"\r\nimport {isUserLoggedIn} from './Redux/Actions/Authaction';\r\n\r\n\r\nconst App = () => {\r\n    const dispatch = useDispatch();\r\n    const auth = useSelector(state => state.auth);\r\n\r\n    useEffect(()=>{\r\n        if(!auth.authenticated){\r\n          dispatch(isUserLoggedIn())\r\n        }\r\n      },[])\r\n\r\n    return (\r\n        <>\r\n           <Navbar/>\r\n           <Switch>\r\n               <PrivateRoute exact path=\"/\" component={Home}/>\r\n                <Route exact path=\"/login\" component={Login}/>\r\n                <Redirect to=\"/\"/>\r\n           </Switch>\r\n\r\n        </>\r\n    )\r\n}\r\n\r\nexport default App\r\n","\r\nconst initialState = {\r\n    firstName :\"\",\r\n    lastName :\"\",\r\n    email :\"\",\r\n    authenticated:false,\r\n    authenticated:false,\r\n    error:null\r\n}\r\n\r\nexport default  (state=initialState,action)=>{\r\n\r\n    console.log(action);\r\n\r\n    switch(action.type){\r\n        case \"LOGIN_REQUEST\":\r\n            state={\r\n                ...state,\r\n                authenticating:true\r\n            }\r\n            break;\r\n        case \"LOGIN_SUCCESS\":\r\n            state={\r\n                ...state,\r\n                ...action.payload.user,\r\n                authenticating:false,\r\n                authenticated:true\r\n            }\r\n            break;\r\n        case \"LOGIN_FAIL\":\r\n            state={\r\n                ...state,\r\n                ...action.payload.error,\r\n                authenticating:false,\r\n                authenticated:false\r\n            }\r\n            break;    \r\n        case \"USER_LOGOUT_REQUEST\":\r\n            break;\r\n        case 'USER_LOGOUT_SUCCESS':\r\n            state={\r\n                ...initialState\r\n            }\r\n            break;\r\n\r\n        case 'USER_LOGOUT_FAIL':\r\n            state={\r\n                ...state,\r\n                error : action.payload.error\r\n            }\r\n            break;\r\n    }\r\n    return state;\r\n\r\n}","const initialState = {\r\n    users :[],\r\n    conversations:[]\r\n}\r\n\r\nexport default (state=initialState,action)=>{\r\n    \r\n    switch(action.type){\r\n        case 'USER_REQUEST':\r\n            break;\r\n        case 'USER_SUCCESS':\r\n            state = {\r\n                ...state,\r\n                users: action.payload.users\r\n            }\r\n            break;\r\n        case 'MESSAGE_SENT_SUCCESS':    \r\n            state = {\r\n                ...state,\r\n                conversations : action.payload.conversations\r\n            }\r\n            break;\r\n    }\r\n\r\n    return state;\r\n}","import { combineReducers } from \"redux\";\r\nimport authReducer from './AuthReducers';\r\nimport userReducer from './UserReducers';\r\n\r\nconst rootReducer = combineReducers({\r\n    auth: authReducer,\r\n    user: userReducer,\r\n});\r\n\r\nexport default rootReducer;","import {applyMiddleware, createStore} from \"redux\"\r\nimport thunk from \"redux-thunk\";\r\nimport rootReducer from '../Reducers/index';\r\n\r\n\r\nconst store = createStore(rootReducer,applyMiddleware(thunk));\r\nexport default store","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport \"../node_modules/bootstrap/dist/css/bootstrap.min.css\"\r\nimport App from \"./App.js\"\r\nimport firebase from \"firebase\"\r\nimport {BrowserRouter} from 'react-router-dom'\r\nimport { Provider } from 'react-redux'\r\nimport store from \"../src/Redux/Store/Store\"\r\n\r\n\r\n  // Your web app's Firebase configuration\r\n  // For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\n  const firebaseConfig = {\r\n    apiKey: \"AIzaSyB-WIh9WISJXxjuHDcDBt06F0DSeKA1HQM\",\r\n    authDomain: \"amessenger-87721.firebaseapp.com\",\r\n    databaseURL: \"https://amessenger-87721.firebaseio.com\",\r\n    projectId: \"amessenger-87721\",\r\n    storageBucket: \"amessenger-87721.appspot.com\",\r\n    messagingSenderId: \"132305837693\",\r\n    appId: \"1:132305837693:web:6ed138f8265081ced85b14\",\r\n    measurementId: \"G-J4LMW29S1G\"\r\n  };\r\n\r\n\r\n  firebase.initializeApp(firebaseConfig);\r\n\r\n  window.store = store;\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n    <BrowserRouter>\r\n        <App/>\r\n    </BrowserRouter>  \r\n    </Provider>  \r\n        ,document.getElementById(\"root\"));"],"sourceRoot":""}